## 3.7 过程（Procedures）
过程是软件中一种很重要的抽象。过程提供了一种打包代码的方式，通过用一组参数、逻辑处理代码和可选的返回值来实现某些功能。
它可以在程序的不同位置被调用。在不同的语言中有不同的实现方式，例如函数（function）、方法（method）、子例程（subroutine）、
处理函数（handler）等等。  
假设过程P调用过程Q，过程Q执行完成后返回过程P，要实现这一过程需要实现以下一个或多个机制：  

  - **传递控制**。在进入过程Q的时候，首先将过程Q的起始地址设置到程序计数器，然后返回时，再将过程Q调用完成后的地址设置到程序  
  计数器。
  - **传递数据**。P必须能向Q提供一个或多个参数，Q必须能返回一个值给P。
  - **分配和释放内存**。在过程Q开始时，可能需要为局部变量分配空间，而过程Q返回前，需要释放这些空间。
### 3.7.1 运行时栈
栈的重要特性：从高地址向低地址扩展。栈指针%rsp指向栈顶元素（即栈的最低地址处），跟随过程调用上下变化。

### 3.7.2 控制转移
将控制从函数P转移到函数Q只需要将程序计数器（Program Counter）设置为Q代码的起始位置。
通过call指令将Q返回之后的地址压入栈中，并调到P的第一条指令。

### 3.7.3 数据传送
调用过程时除了控制传递还需要数据传送，过程调用结束时还需要返回值。数据传送大部分需要的寄存器传递数据。  

### 3.7.4 栈上的局部存储